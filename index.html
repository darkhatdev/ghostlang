<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÂêçÊ°• MindBridge</title>
    <meta name="description" content="Learn Chinese through pattern recognition">
    <meta name="theme-color" content="#0f0a1e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Noto+Sans+SC:wght@300;400;500;700;900&family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
        body{font-family:'Outfit',sans-serif;overflow:hidden;height:100vh;height:100dvh}
        #root{height:100%}
        ::-webkit-scrollbar{width:4px}
        ::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.12);border-radius:2px}
        @keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(232,100,100,0.5)}50%{box-shadow:0 0 0 12px rgba(232,100,100,0)}}
        @keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
        @keyframes breathe{0%,100%{opacity:0.6}50%{opacity:1}}
    </style>
    <script>if('serviceWorker' in navigator){navigator.serviceWorker.register('./sw.js').catch(e=>console.log('SW',e));}</script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ÂêçÊ°• MINDBRIDGE v8 ‚Äî Â∑¶ÊâãÈ¨ºÈ¨º Edition
// Stroke tracing ¬∑ Audio stories ¬∑ 8 lessons
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const THEMES={
  cosmic:{name:"Cosmic",emoji:"üåå",bg:"linear-gradient(170deg,#0f0a1e 0%,#1a1035 40%,#1e0f2e 70%,#120a20 100%)",bgSolid:"#0f0a1e",surface:"rgba(255,255,255,0.05)",card:"rgba(255,255,255,0.06)",cardHover:"rgba(255,255,255,0.12)",header:"rgba(15,10,30,0.94)",accent:"#c4a0e8",accent2:"#e8b87a",t1:"#e8dff5",t2:"#a899c0",t3:"#7a6b94",border:"rgba(255,255,255,0.08)",font:"'Noto Sans SC',sans-serif",sBg:"#1a1035",sLine:"#c4a0e8",sGhost:"#352a4a"},
  tarot:{name:"Tarot",emoji:"üîÆ",bg:"linear-gradient(170deg,#141025 0%,#1f1540 40%,#251845 70%,#0f0a1e 100%)",bgSolid:"#141025",surface:"rgba(255,255,255,0.05)",card:"rgba(255,255,255,0.06)",cardHover:"rgba(255,255,255,0.12)",header:"rgba(20,16,37,0.94)",accent:"#d4a574",accent2:"#c490d6",t1:"#f0e6d8",t2:"#c0a888",t3:"#8a7a68",border:"rgba(255,255,255,0.08)",font:"'Noto Sans SC',sans-serif",sBg:"#1f1540",sLine:"#d4a574",sGhost:"#3a2a4a"},
  nebula:{name:"Nebula",emoji:"üí´",bg:"linear-gradient(170deg,#0a0f1e 0%,#0f1a35 40%,#1a1040 70%,#0a0818 100%)",bgSolid:"#0a0f1e",surface:"rgba(255,255,255,0.05)",card:"rgba(255,255,255,0.06)",cardHover:"rgba(255,255,255,0.12)",header:"rgba(10,15,30,0.94)",accent:"#e8a0b8",accent2:"#80b8e8",t1:"#f0e0ea",t2:"#b898a8",t3:"#886878",border:"rgba(255,255,255,0.08)",font:"'Noto Sans SC',sans-serif",sBg:"#0f1a35",sLine:"#e8a0b8",sGhost:"#2a2040"},
  zen:{name:"Zen",emoji:"‚óªÔ∏è",bg:"linear-gradient(170deg,#f8f6f2 0%,#f0ece4 100%)",bgSolid:"#f8f6f2",surface:"rgba(0,0,0,0.03)",card:"rgba(0,0,0,0.04)",cardHover:"rgba(0,0,0,0.07)",header:"rgba(248,246,242,0.95)",accent:"#8a7a6a",accent2:"#a08878",t1:"#2a2520",t2:"#6a6055",t3:"#9a9088",border:"rgba(0,0,0,0.08)",font:"'Noto Sans SC',sans-serif",sBg:"#f0ece4",sLine:"#6a5a4a",sGhost:"#d4cec4"},
};

const R={subject:{c:"#FF8A8A",s:"S"},verb:{c:"#6EEAE0",s:"V"},object:{c:"#FFE88A",s:"O"},particle:{c:"#BEA4F4",s:"P"},adjective:{c:"#FFB06A",s:"Adj"},adverb:{c:"#50D4E8",s:"Adv"},measure:{c:"#A88CF6",s:"MW"},time:{c:"#F4BE50",s:"T"},location:{c:"#50D4A0",s:"Loc"},question:{c:"#FF7088",s:"Q"},pronoun:{c:"#E8A0F4",s:"Pn"},negation:{c:"#FF6A6A",s:"Neg"}};
const TC={1:"#6aaaf0",2:"#5cc47a",3:"#e8a44a",4:"#e05858",5:"#8888aa"};
function gt(p){if(/[ƒÅƒìƒ´≈ç≈´«ñ]/.test(p))return 1;if(/[√°√©√≠√≥√∫«ò]/.test(p))return 2;if(/[«éƒõ«ê«í«î«ö]/.test(p))return 3;if(/[√†√®√¨√≤√π«ú]/.test(p))return 4;return 5;}

const STORIES=[
  {id:"st1",cat:"üó£Ô∏è Slang",title:"ÁâõÈÄº ni√∫bƒ´ ‚Äî The Ultimate Compliment",titleP:"ÁâõÈÄº ni√∫bƒ´ ‚Äî O Elogio Supremo",body:"When something blows your mind, say ÁâõÈÄº (ni√∫bƒ´). Literally 'cow pussy'. Means 'awesome/badass'. Polite version: just Áâõ. In texts: NB.",bodyP:"Quando algo te impressiona, diga ÁâõÈÄº. Significa 'incr√≠vel/foda'. Vers√£o educada: Áâõ. Em textos: NB.",key:"ÁâõÈÄº = awesome. Áâõ = polite. NB = text.",keyP:"ÁâõÈÄº = incr√≠vel. Áâõ = educado. NB = texto.",audio:"Â§™ÁâõÈÄº‰∫Ü",chars:"ÁâõÈÄº"},
  {id:"st2",cat:"üó£Ô∏è Slang",title:"666 li√πli√πli√π ‚Äî Smooth Operator",titleP:"666 li√πli√πli√π ‚Äî Mandou Bem",body:"In gaming, 666 = 'skilled/smooth'. Ê∫ú (li√π, slick) sounds like ÂÖ≠ (li√π, six). Amazing play? Chat floods with 666666.",bodyP:"Em jogos, 666 = 'habilidoso'. Ê∫ú (li√π) soa como ÂÖ≠ (li√π, seis). Jogada incr√≠vel? Chat: 666666.",key:"666 = skilled (Ê∫ú li√π ‚âà ÂÖ≠ li√π)",keyP:"666 = habilidoso (Ê∫ú ‚âà ÂÖ≠)",audio:"ÂÖ≠ÂÖ≠ÂÖ≠Â§™Ê∫ú‰∫Ü",chars:"Ê∫úÂÖ≠"},
  {id:"st3",cat:"üó£Ô∏è Slang",title:"ÊàëÂéª w«í q√π ‚Äî Chinese WTF",titleP:"ÊàëÂéª w«í q√π ‚Äî O WTF Chin√™s",body:"ÊàëÂéª literally 'I go' but = 'WTF/holy crap'. Stub your toe? ÊàëÂéªÔºÅClean version of ÊàëÈù†.",bodyP:"ÊàëÂéª literalmente 'eu vou' mas = 'caramba'. Vers√£o limpa de ÊàëÈù†.",key:"ÊàëÂéª = WTF (clean). ÊàëÈù† = stronger.",keyP:"ÊàëÂéª = caramba. ÊàëÈù† = mais forte.",audio:"ÊàëÂéªËøô‰πüÂ§™Ë¥µ‰∫Ü",chars:"Âéª"},
  {id:"st4",cat:"üìñ Culture",title:"ÂêÉ‰∫ÜÂêóÔºü‚Äî Have You Eaten?",titleP:"ÂêÉ‰∫ÜÂêóÔºü‚Äî J√° Comeu?",body:"THE Chinese greeting: ‰Ω†ÂêÉ‰∫ÜÂêóÔºüNot a lunch invite ‚Äî it's hello. After centuries of famine, food question = caring. Answer always ÂêÉ‰∫Ü.",bodyP:"O cumprimento chin√™s: ‰Ω†ÂêÉ‰∫ÜÂêóÔºüN√£o √© convite ‚Äî √© 'ol√°'. Perguntar sobre comida = se importar.",key:"‰Ω†ÂêÉ‰∫ÜÂêó = Hello ('have you eaten?')",keyP:"‰Ω†ÂêÉ‰∫ÜÂêó = Ol√° ('j√° comeu?')",audio:"‰Ω†ÂêÉ‰∫ÜÂêóÂêÉ‰∫ÜÂêÉ‰∫Ü",chars:"ÂêÉ"},
  {id:"st5",cat:"üìñ Culture",title:"Èù¢Â≠ê mi√†nzi ‚Äî The Face Game",titleP:"Èù¢Â≠ê mi√†nzi ‚Äî O Jogo da Face",body:"Èù¢Â≠ê = face/reputation. ÁªôÈù¢Â≠ê = give face = respect. ‰∏¢Èù¢Â≠ê = lose face = embarrass. Never correct your boss in meetings.",bodyP:"Èù¢Â≠ê = reputa√ß√£o. ÁªôÈù¢Â≠ê = respeitar. ‰∏¢Èù¢Â≠ê = constranger. Nunca corrija o chefe em reuni√£o.",key:"ÁªôÈù¢Â≠ê = respect. ‰∏¢Èù¢Â≠ê = embarrass.",keyP:"ÁªôÈù¢Â≠ê = respeitar. ‰∏¢Èù¢Â≠ê = constranger.",audio:"Áªô‰ªñ‰∏Ä‰∏™Èù¢Â≠êÂêß",chars:"Èù¢Â≠ê"},
  {id:"st6",cat:"üó£Ô∏è Slang",title:"Âä†Ê≤π jiƒÅy√≥u ‚Äî Add Oil!",titleP:"Âä†Ê≤π jiƒÅy√≥u ‚Äî Adiciona √ìleo!",body:"Âä†Ê≤π = 'add oil/fuel' ‚Äî THE encouragement phrase. In Oxford Dictionary since 2018. 'You got this' + 'keep going' in one word.",bodyP:"Âä†Ê≤π = 'adicionar √≥leo' ‚Äî encorajamento. No Oxford desde 2018.",key:"Âä†Ê≤π = You got this! Go for it!",keyP:"Âä†Ê≤π = Vai l√°! For√ßa!",audio:"Âä†Ê≤πÂä†Ê≤π‰Ω†ÂèØ‰ª•ÁöÑ",chars:"Âä†Ê≤π"},
  {id:"st7",cat:"üìñ Culture",title:"Á∫¢ÂåÖ h√≥ngbƒÅo ‚Äî Red Envelopes",titleP:"Á∫¢ÂåÖ h√≥ngbƒÅo ‚Äî Envelopes Vermelhos",body:"Á∫¢ÂåÖ = red envelope with money. ALWAYS even amounts. NEVER ¬•4 (Âõõ‚âàÊ≠ª death). 8 = prosperity. ¬•5.20 = ÊàëÁà±‰Ω† (520 sounds like it).",bodyP:"Á∫¢ÂåÖ = envelope com dinheiro. SEMPRE pares. NUNCA ¬•4 (Âõõ‚âàÊ≠ª morte). ¬•5.20 = ÊàëÁà±‰Ω†.",key:"Á∫¢ÂåÖ = red envelope. No 4! 520 = love.",keyP:"Á∫¢ÂåÖ = envelope. Sem 4! 520 = amor.",audio:"ÊÅ≠ÂñúÂèëË¥¢Á∫¢ÂåÖÊãøÊù•",chars:"Á∫¢ÂåÖ"},
  {id:"st8",cat:"üó£Ô∏è Slang",title:"ÊâìÂç° d«ék«é ‚Äî Check In Culture",titleP:"ÊâìÂç° d«ék«é ‚Äî Cultura do Check-in",body:"ÊâìÂç° meant 'punch timecard'. Now = social media check-ins. ÁΩëÁ∫¢ÊâìÂç°Âú∞ = influencer spots.",bodyP:"ÊâìÂç° significava 'bater ponto'. Agora = check-in. ÁΩëÁ∫¢ÊâìÂç°Âú∞ = pontos de influencers.",key:"ÊâìÂç° = check in. ÁΩëÁ∫¢ = influencer.",keyP:"ÊâìÂç° = check-in. ÁΩëÁ∫¢ = influencer.",audio:"‰ªäÂ§©ÊâìÂç°‰∏Ä‰∏™ÁΩëÁ∫¢È§êÂéÖ",chars:"ÊâìÂç°"},
  {id:"st9",cat:"üìñ Culture",title:"Â∑Æ‰∏çÂ§ö ch√†budu≈ç ‚Äî Close Enough",titleP:"Â∑Æ‰∏çÂ§ö ch√†budu≈ç ‚Äî Quase L√°",body:"Â∑Æ‰∏çÂ§ö = almost/close enough. THE Chinese concept. 30 min late? Â∑Æ‰∏çÂ§öÊòØÂáÜÊó∂! Like 'mais ou menos' on steroids.",bodyP:"Â∑Æ‰∏çÂ§ö = quase/mais ou menos. 30 min atrasado? Â∑Æ‰∏çÂ§öÊòØÂáÜÊó∂!",key:"Â∑Æ‰∏çÂ§ö = close enough / good enough.",keyP:"Â∑Æ‰∏çÂ§ö = quase / mais ou menos.",audio:"Â∑Æ‰∏çÂ§öÂ∞±Ë°å‰∫Ü",chars:"Â∑Æ‰∏çÂ§ö"},
  {id:"st10",cat:"üó£Ô∏è Slang",title:"Ë∫∫Âπ≥ t«éng p√≠ng ‚Äî Lie Flat",titleP:"Ë∫∫Âπ≥ t«éng p√≠ng ‚Äî Deitar e Desistir",body:"Ë∫∫Âπ≥ = lie flat ‚Äî Chinese quiet quitting. 996 culture pushed youth to 'just lie flat'. ÊëÜÁÉÇ = 'let it rot' ‚Äî more extreme.",bodyP:"Ë∫∫Âπ≥ = 'desist√™ncia silenciosa'. Cultura 996. ÊëÜÁÉÇ = 'deixar apodrecer'.",key:"Ë∫∫Âπ≥ = quit hustling. ÊëÜÁÉÇ = let it rot.",keyP:"Ë∫∫Âπ≥ = desistir. ÊëÜÁÉÇ = apodrecer.",audio:"Êàë‰ªäÂ§©Â∞±ÊÉ≥Ë∫∫Âπ≥",chars:"Ë∫∫Âπ≥"},
];

const LESSONS=[
  {id:1,title:"Greetings",tz:"ÈóÆÂÄô",ss:[
    {w:[{h:"‰Ω†",p:"n«ê",e:"you",pt:"voc√™",r:"subject"},{h:"Â•Ω",p:"h«éo",e:"good",pt:"bom/boa",r:"adjective"}],col:"Âó® (hƒÅi) ‚Äî from English 'hi'",colP:"Âó® ‚Äî do ingl√™s 'hi'",n:"Literally 'You good'. No verb needed!",nP:"Literalmente 'Voc√™ bom'. Sem verbo!"},
    {w:[{h:"Êàë",p:"w«í",e:"I",pt:"eu",r:"subject"},{h:"Âè´",p:"ji√†o",e:"am called",pt:"me chamo",r:"verb"},{h:"È¨ºÈ¨º",p:"Gu«êgu«ê",e:"Guigui",pt:"Guigui",r:"object"}],col:"ÊàëÊòØÈ¨ºÈ¨º ‚Äî ÊòØ=am (more direct)",colP:"ÊàëÊòØÈ¨ºÈ¨º ‚Äî ÊòØ=sou (mais direto)",n:"ÊàëÂè´ = 'I am called'. È¨º = ghost/spirit ‚Äî Â∑¶ÊâãÈ¨ºÈ¨º!",nP:"ÊàëÂè´ = 'Me chamo'. È¨º = fantasma/esp√≠rito!"},
    {w:[{h:"‰Ω†",p:"n«ê",e:"you",pt:"voc√™",r:"subject"},{h:"Âè´",p:"ji√†o",e:"called",pt:"chama",r:"verb"},{h:"‰ªÄ‰πà",p:"sh√©nme",e:"what",pt:"o qu√™",r:"question"},{h:"ÂêçÂ≠ó",p:"m√≠ngzi",e:"name",pt:"nome",r:"object"}],col:"‰Ω†Âè´Âï•Ôºü‚Äî Âï• replaces ‰ªÄ‰πà",colP:"‰Ω†Âè´Âï•Ôºü‚Äî Âï• substitui ‰ªÄ‰πà",n:"‰ªÄ‰πà goes WHERE the answer goes! ‰Ω†Âè´[‰ªÄ‰πà]‚ÜíÊàëÂè´[È¨ºÈ¨º]",nP:"‰ªÄ‰πà fica ONDE a resposta vai!"},
    {w:[{h:"Âæà",p:"hƒõn",e:"very",pt:"muito",r:"adverb"},{h:"È´òÂÖ¥",p:"gƒÅox√¨ng",e:"happy",pt:"feliz",r:"adjective"},{h:"ËÆ§ËØÜ",p:"r√®nshi",e:"to meet",pt:"conhecer",r:"verb"},{h:"‰Ω†",p:"n«ê",e:"you",pt:"voc√™",r:"object"}],col:"Âπ∏‰ºöÂπ∏‰ºö ‚Äî literary/formal",colP:"Âπ∏‰ºöÂπ∏‰ºö ‚Äî liter√°rio",n:"Âæà before adjectives is grammar glue, not emphasis!",nP:"Âæà antes de adjetivos √© gram√°tica!"},
  ]},
  {id:2,title:"Daily Life",tz:"Êó•Â∏∏",ss:[
    {w:[{h:"Êàë",p:"w«í",e:"I",pt:"eu",r:"subject"},{h:"‰ªäÂ§©",p:"jƒ´ntiƒÅn",e:"today",pt:"hoje",r:"time"},{h:"Âæà",p:"hƒõn",e:"very",pt:"muito",r:"adverb"},{h:"Âøô",p:"m√°ng",e:"busy",pt:"ocupado",r:"adjective"}],col:"‰ªäÂÑøÂøôÊ≠ª‰∫Ü ‚Äî busy to death",colP:"‰ªäÂÑøÂøôÊ≠ª‰∫Ü ‚Äî ocupado de morrer",n:"Time ALWAYS before verb: S + TIME + desc.",nP:"Tempo SEMPRE antes: S + TEMPO + desc."},
    {w:[{h:"Êàë",p:"w«í",e:"I",pt:"eu",r:"subject"},{h:"‰∏ç",p:"b√π",e:"not",pt:"n√£o",r:"negation"},{h:"Âñù",p:"hƒì",e:"drink",pt:"beber",r:"verb"},{h:"ÂíñÂï°",p:"kƒÅfƒìi",e:"coffee",pt:"caf√©",r:"object"}],col:"ÂíñÂï°Êàë‰∏çÁ¢∞ ‚Äî topic-front!",colP:"ÂíñÂï°Êàë‰∏çÁ¢∞ ‚Äî t√≥pico √† frente!",n:"‰∏ç before verb = negation. ÂíñÂï° ‚âà caf√© ‚Äî same origin!",nP:"‰∏ç antes do verbo = nega√ß√£o. ÂíñÂï° ‚âà caf√©!"},
    {w:[{h:"Êàë‰ª¨",p:"w«ímen",e:"we",pt:"n√≥s",r:"subject"},{h:"ÊòéÂ§©",p:"m√≠ngtiƒÅn",e:"tomorrow",pt:"amanh√£",r:"time"},{h:"Âéª",p:"q√π",e:"go",pt:"ir",r:"verb"},{h:"Áúã",p:"k√†n",e:"see",pt:"ver",r:"verb"},{h:"ÁîµÂΩ±",p:"di√†ny«êng",e:"movie",pt:"filme",r:"object"}],col:"ÊòéÂÑøÁúãÁîµÂΩ±Âéª",colP:"ÊòéÂÑøÁúãÁîµÂΩ±Âéª",n:"ÂéªÁúã = go+see. No tenses ‚Äî ÊòéÂ§© handles time!",nP:"ÂéªÁúã = ir+ver. Sem tempos verbais!"},
  ]},
  {id:3,title:"Shopping",tz:"Ë¥≠Áâ©",ss:[
    {w:[{h:"Ëøô",p:"zh√®",e:"this",pt:"este/a",r:"pronoun"},{h:"‰∏™",p:"g√®",e:"[MW]",pt:"[cl.]",r:"measure"},{h:"Â§öÂ∞ë",p:"du≈çshao",e:"how much",pt:"quanto",r:"question"},{h:"Èí±",p:"qi√°n",e:"money",pt:"dinheiro",r:"object"}],col:"ËøôÂíãÂçñÁöÑÔºü",colP:"ËøôÂíãÂçñÁöÑÔºü",n:"‰∏™ = universal measure word. Between number + noun.",nP:"‰∏™ = classificador universal."},
    {w:[{h:"Â§™",p:"t√†i",e:"too",pt:"demais",r:"adverb"},{h:"Ë¥µ",p:"gu√¨",e:"expensive",pt:"caro",r:"adjective"},{h:"‰∫Ü",p:"le",e:"[change!]",pt:"[mudan√ßa!]",r:"particle"}],col:"Â•ΩË¥µÂïäÔºÅ",colP:"Â•ΩË¥µÂïäÔºÅ",n:"‰∫Ü = CHANGE marker, NOT past tense! It became expensive.",nP:"‰∫Ü = MUDAN√áA, N√ÉO passado!"},
    {w:[{h:"ÂèØ‰ª•",p:"kƒõy«ê",e:"can",pt:"pode",r:"verb"},{h:"‰æøÂÆú",p:"pi√°nyi",e:"cheaper",pt:"barato",r:"adjective"},{h:"‰∏ÄÁÇπ",p:"y√¨di«én",e:"a little",pt:"um pouco",r:"adverb"},{h:"Âêó",p:"ma",e:"[yes/no?]",pt:"[sim/n√£o?]",r:"particle"}],col:"ËÉΩ‰∏çËÉΩ‰æøÂÆúÁÇπÂÑøÔºü",colP:"ËÉΩ‰∏çËÉΩ‰æøÂÆúÁÇπÂÑøÔºü",n:"Âêó = yes/no question. ËÉΩ‰∏çËÉΩ = can-not-can pattern.",nP:"Âêó = sim/n√£o. ËÉΩ‰∏çËÉΩ = pode-n√£o-pode?"},
  ]},
  {id:4,title:"Food",tz:"ÂêÉÈ•≠",ss:[
    {w:[{h:"Êàë",p:"w«í",e:"I",pt:"eu",r:"subject"},{h:"ÊÉ≥",p:"xi«éng",e:"want",pt:"quero",r:"verb"},{h:"ÂêÉ",p:"chƒ´",e:"eat",pt:"comer",r:"verb"},{h:"ÁÅ´ÈîÖ",p:"hu«ígu≈ç",e:"hotpot",pt:"hotpot",r:"object"}],col:"Êï¥ÁÇπÁÅ´ÈîÖ",colP:"Êï¥ÁÇπÁÅ´ÈîÖ ‚Äî bora hotpot",n:"ÊÉ≥+verb = want to. Stack verbs freely!",nP:"ÊÉ≥+verbo = querer."},
    {w:[{h:"Ëøô",p:"zh√®",e:"this",pt:"isto",r:"pronoun"},{h:"‰∏™",p:"g√®",e:"[MW]",pt:"[cl.]",r:"measure"},{h:"Ëèú",p:"c√†i",e:"dish",pt:"prato",r:"object"},{h:"Â§™",p:"t√†i",e:"too",pt:"demais",r:"adverb"},{h:"Ëæ£",p:"l√†",e:"spicy",pt:"picante",r:"adjective"},{h:"‰∫Ü",p:"le",e:"[!]",pt:"[!]",r:"particle"}],col:"Ëæ£Ê≠ªÊàë‰∫ÜÔºÅ",colP:"Ëæ£Ê≠ªÊàë‰∫ÜÔºÅ",n:"Â§™...‰∫Ü = excessively. Ê≠ª‰∫Ü = 'to death' emphasis!",nP:"Â§™...‰∫Ü = demais. Ê≠ª‰∫Ü = 'de morrer'!"},
    {w:[{h:"ÊúçÂä°Âëò",p:"f√∫w√πyu√°n",e:"waiter",pt:"gar√ßom",r:"object"},{h:"‰π∞Âçï",p:"m«éidƒÅn",e:"bill",pt:"conta",r:"verb"}],col:"ÁªìË¥¶ ‚Äî northern style",colP:"ÁªìË¥¶ ‚Äî estilo do norte",n:"ÊúçÂä°Âëò! = calling waiter. Not rude in China!",nP:"ÊúçÂä°Âëò! N√£o √© rude na China!"},
  ]},
  {id:5,title:"Transport",tz:"‰∫§ÈÄö",ss:[
    {w:[{h:"Êàë",p:"w«í",e:"I",pt:"eu",r:"subject"},{h:"Ë¶Å",p:"y√†o",e:"need to",pt:"preciso",r:"verb"},{h:"Âéª",p:"q√π",e:"go to",pt:"ir",r:"verb"},{h:"Êú∫Âú∫",p:"jƒ´ch«éng",e:"airport",pt:"aeroporto",r:"location"}],col:"Ëµ∞ÔºåÂéªÊú∫Âú∫",colP:"Ëµ∞ÔºåÂéªÊú∫Âú∫ ‚Äî bora",n:"Ë¶Å+verb = will/need. Stronger than ÊÉ≥.",nP:"Ë¶Å+verbo. Mais forte que ÊÉ≥."},
    {w:[{h:"Âú∞ÈìÅ",p:"d√¨tiƒõ",e:"subway",pt:"metr√¥",r:"object"},{h:"Á´ô",p:"zh√†n",e:"station",pt:"esta√ß√£o",r:"object"},{h:"Âú®",p:"z√†i",e:"is at",pt:"fica",r:"verb"},{h:"Âì™Èáå",p:"n«él«ê",e:"where",pt:"onde",r:"question"}],col:"Âú∞ÈìÅÂú®Âì™ÂÑøÔºü",colP:"Âú∞ÈìÅÂú®Âì™ÂÑøÔºü",n:"Âú®+Âì™Èáå = is where? Same swap pattern!",nP:"Âú®+Âì™Èáå = onde fica?"},
    {w:[{h:"Â∏àÂÇÖ",p:"shƒ´fu",e:"driver",pt:"motorista",r:"subject"},{h:"ËØ∑",p:"q«êng",e:"please",pt:"por favor",r:"adverb"},{h:"ÂºÄ",p:"kƒÅi",e:"drive",pt:"dirigir",r:"verb"},{h:"ÊÖ¢",p:"m√†n",e:"slow",pt:"devagar",r:"adverb"},{h:"‰∏ÄÁÇπ",p:"y√¨di«én",e:"a bit",pt:"um pouco",r:"adverb"}],col:"ÊÖ¢ÁÇπÂÑøÂºÄÔºÅ",colP:"ÊÖ¢ÁÇπÂÑøÂºÄÔºÅ",n:"Â∏àÂÇÖ = respectful for skilled workers!",nP:"Â∏àÂÇÖ = respeitoso!"},
  ]},
  {id:6,title:"Family",tz:"ÂÆ∂‰∫∫",ss:[
    {w:[{h:"Ëøô",p:"zh√®",e:"this",pt:"esta",r:"pronoun"},{h:"ÊòØ",p:"sh√¨",e:"is",pt:"√©",r:"verb"},{h:"Êàë",p:"w«í",e:"my",pt:"minha",r:"subject"},{h:"Â•≥ÂÑø",p:"n«ö'√©r",e:"daughter",pt:"filha",r:"object"}],col:"ËøôÊàëÈó∫Â•≥ ‚Äî casual",colP:"ËøôÊàëÈó∫Â•≥ ‚Äî casual",n:"ÊòØ = to be. The ONLY true 'is' verb in Chinese.",nP:"ÊòØ = ser. O √öNICO 'ser' real em chin√™s."},
    {w:[{h:"Â•π",p:"tƒÅ",e:"she",pt:"ela",r:"subject"},{h:"Âæà",p:"hƒõn",e:"very",pt:"muito",r:"adverb"},{h:"ËÅ™Êòé",p:"c≈çngming",e:"smart",pt:"inteligente",r:"adjective"}],col:"Â•πË¥ºËÅ™Êòé ‚Äî Ë¥º=crazy smart",colP:"Â•πË¥ºËÅ™Êòé ‚Äî Ë¥º=super",n:"Â•π‰ªñÂÆÉ all = tƒÅ! Only writing differs.",nP:"Â•π‰ªñÂÆÉ soam igual: tƒÅ!"},
    {w:[{h:"Êàë",p:"w«í",e:"I",pt:"eu",r:"subject"},{h:"Áà±",p:"√†i",e:"love",pt:"amo",r:"verb"},{h:"ÊàëÁöÑ",p:"w«í de",e:"my",pt:"minha",r:"pronoun"},{h:"ÂÆ∂",p:"jiƒÅ",e:"family",pt:"fam√≠lia",r:"object"}],col:"ÂÆ∂‰∫∫ÊúÄÈáçË¶Å ‚Äî family #1",colP:"ÂÆ∂‰∫∫ÊúÄÈáçË¶Å ‚Äî fam√≠lia #1",n:"ÁöÑ = possessive. ÊàëÁöÑ=my. ‰Ω†ÁöÑ=your.",nP:"ÁöÑ = possessivo. ÊàëÁöÑ=meu."},
  ]},
  {id:7,title:"Feelings",tz:"ÊÑüËßâ",ss:[
    {w:[{h:"Êàë",p:"w«í",e:"I",pt:"eu",r:"subject"},{h:"Âæà",p:"hƒõn",e:"very",pt:"muito",r:"adverb"},{h:"ÂºÄÂøÉ",p:"kƒÅixƒ´n",e:"happy",pt:"feliz",r:"adjective"}],col:"È´òÂÖ¥Âùè‰∫Ü ‚Äî ecstatic",colP:"È´òÂÖ¥Âùè‰∫Ü ‚Äî euf√≥rico",n:"ÂºÄÂøÉ/È´òÂÖ¥/Âø´‰πê all = happy, different vibes.",nP:"ÂºÄÂøÉ/È´òÂÖ¥/Âø´‰πê = feliz, vibes diferentes."},
    {w:[{h:"‰ªäÂ§©",p:"jƒ´ntiƒÅn",e:"today",pt:"hoje",r:"time"},{h:"Â§©Ê∞î",p:"tiƒÅnq√¨",e:"weather",pt:"clima",r:"subject"},{h:"Áúü",p:"zhƒìn",e:"really",pt:"realmente",r:"adverb"},{h:"Â•Ω",p:"h«éo",e:"good",pt:"bom",r:"adjective"}],col:"‰ªäÂÑøÂ§©‰∏çÈîô",colP:"‰ªäÂÑøÂ§©‰∏çÈîô ‚Äî dia legal",n:"Áúü = truly/really. Stronger than Âæà.",nP:"Áúü = verdadeiramente. Mais forte que Âæà."},
    {w:[{h:"Êàë",p:"w«í",e:"I",pt:"eu",r:"subject"},{h:"ÊúâÁÇπ",p:"y«íudi«én",e:"a bit",pt:"um pouco",r:"adverb"},{h:"Á¥Ø",p:"l√®i",e:"tired",pt:"cansado",r:"adjective"}],col:"Á¥ØÊàêÁãó‰∫Ü ‚Äî tired as a dog",colP:"Á¥ØÊàêÁãó‰∫Ü ‚Äî cansado como c√£o",n:"ÊúâÁÇπ=a bit (negative). ‰∏ÄÁÇπ=a bit (neutral).",nP:"ÊúâÁÇπ=(negativo). ‰∏ÄÁÇπ=(neutro)."},
  ]},
  {id:8,title:"Numbers",tz:"Êï∞Â≠ó",ss:[
    {w:[{h:"‰∏Ä",p:"yƒ´",e:"one",pt:"um",r:"object"},{h:"‰∫å",p:"√®r",e:"two",pt:"dois",r:"object"},{h:"‰∏â",p:"sƒÅn",e:"three",pt:"tr√™s",r:"object"},{h:"Âõõ",p:"s√¨",e:"four",pt:"quatro",r:"object"},{h:"‰∫î",p:"w«î",e:"five",pt:"cinco",r:"object"}],col:"Âπ∫(yƒÅo) replaces ‰∏Ä in phones",colP:"Âπ∫(yƒÅo) substitui ‰∏Ä em telefones",n:"Âõõ(4)=bad luck (‚âàÊ≠ª death). ÂÖ´(8)=lucky!",nP:"Âõõ(4)=azar (‚âàÊ≠ª morte). ÂÖ´(8)=sorte!"},
    {w:[{h:"ÂÖ≠",p:"li√π",e:"six",pt:"seis",r:"object"},{h:"‰∏É",p:"qƒ´",e:"seven",pt:"sete",r:"object"},{h:"ÂÖ´",p:"bƒÅ",e:"eight",pt:"oito",r:"object"},{h:"‰πù",p:"ji«î",e:"nine",pt:"nove",r:"object"},{h:"ÂçÅ",p:"sh√≠",e:"ten",pt:"dez",r:"object"}],col:"666=awesome ÂÖ´=prosperity",colP:"666=incr√≠vel ÂÖ´=prosperidade",n:"Combine: ÂçÅ‰∏Ä=11, ‰∫åÂçÅ=20, ‰∫åÂçÅ‰∏Ä=21. Just math!",nP:"Combine: ÂçÅ‰∏Ä=11, ‰∫åÂçÅ=20. Matem√°tica!"},
    {w:[{h:"Êàë",p:"w«í",e:"I",pt:"eu",r:"subject"},{h:"‰ªäÂπ¥",p:"jƒ´nni√°n",e:"this year",pt:"este ano",r:"time"},{h:"‰∏âÂçÅ",p:"sƒÅnsh√≠",e:"thirty",pt:"trinta",r:"object"},{h:"Â≤Å",p:"su√¨",e:"years old",pt:"anos",r:"measure"}],col:"Êàë‰∏âÂçÅ‰∫Ü",colP:"Êàë‰∏âÂçÅ‰∫Ü",n:"No 'am'. No 'old'. Just: I + year + 30 + age-word.",nP:"Sem 'tenho'. S√≥: eu + ano + 30 + contador."},
  ]},
];

// ‚ïê‚ïê‚ïê SETTINGS ‚ïê‚ïê‚ïê
function Settings({thm,setThm,fs,setFs,sc,setSc,lang,setLang,pin,setPin,rate,setRate,close}){
  const th=THEMES[thm];
  const row=(l,c)=>React.createElement('div',{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'10px 0',borderBottom:`1px solid ${th.border}`}},React.createElement('span',{style:{fontSize:'14px',color:th.t2}},l),c);
  const tog=(v,s)=>React.createElement('button',{onClick:()=>s(!v),style:{width:'42px',height:'24px',borderRadius:'12px',border:'none',background:v?th.accent:`${th.t3}40`,cursor:'pointer',position:'relative'}},React.createElement('div',{style:{width:'18px',height:'18px',borderRadius:'9px',background:'#fff',position:'absolute',top:'3px',left:v?'21px':'3px',transition:'all 0.2s'}}));
  return React.createElement('div',{onClick:e=>{if(e.target===e.currentTarget)close();},style:{position:'fixed',inset:0,zIndex:100,background:'rgba(0,0,0,0.65)',backdropFilter:'blur(8px)',display:'flex',justifyContent:'center',alignItems:'flex-start',padding:'30px 14px',overflowY:'auto'}},
    React.createElement('div',{style:{background:th.bgSolid,borderRadius:'16px',padding:'20px',maxWidth:'400px',width:'100%',border:`1px solid ${th.border}`,maxHeight:'80vh',overflowY:'auto'}},
      React.createElement('div',{style:{display:'flex',justifyContent:'space-between',marginBottom:'14px'}},React.createElement('h2',{style:{margin:0,color:th.t1,fontSize:'18px'}},"‚öôÔ∏è Settings"),React.createElement('button',{onClick:close,style:{background:'none',border:'none',color:th.t3,fontSize:'18px',cursor:'pointer'}},"‚úï")),
      React.createElement('div',{style:{fontSize:'11px',color:th.t3,textTransform:'uppercase',letterSpacing:'1.5px',fontWeight:700,margin:'8px 0 6px'}},"Theme"),
      React.createElement('div',{style:{display:'flex',flexWrap:'wrap',gap:'6px',marginBottom:'12px'}},Object.entries(THEMES).map(([k,v])=>React.createElement('button',{key:k,onClick:()=>setThm(k),style:{padding:'6px 12px',borderRadius:'8px',border:thm===k?`2px solid ${v.accent}`:`1px solid ${th.border}`,background:thm===k?`${v.accent}20`:'transparent',color:thm===k?v.accent:th.t2,cursor:'pointer',fontSize:'13px',fontWeight:600}},v.emoji+" "+v.name))),
      row("Character size "+fs+"px",React.createElement('input',{type:'range',min:26,max:50,value:fs,onChange:e=>setFs(Number(e.target.value)),style:{width:'120px',accentColor:th.accent}})),
      row("Speech speed "+rate+"x",React.createElement('input',{type:'range',min:0.3,max:1.2,step:0.1,value:rate,onChange:e=>setRate(parseFloat(e.target.value)),style:{width:'120px',accentColor:th.accent}})),
      row("Pinyin",tog(pin,setPin)),row("üó£Ô∏è Colloquial",tog(sc,setSc)),
      React.createElement('div',{style:{fontSize:'11px',color:th.t3,textTransform:'uppercase',letterSpacing:'1.5px',fontWeight:700,margin:'12px 0 6px'}},"Translation"),
      React.createElement('div',{style:{display:'flex',gap:'6px'}},[["english","üá∫üá∏"],["portuguese","üáßüá∑"],["both","Both"]].map(([v,l])=>React.createElement('button',{key:v,onClick:()=>setLang(v),style:{flex:1,padding:'7px',borderRadius:'8px',border:`1px solid ${lang===v?th.accent:th.border}`,background:lang===v?`${th.accent}18`:'transparent',color:lang===v?th.accent:th.t3,cursor:'pointer',fontSize:'14px',fontWeight:600}},l))),
      React.createElement('div',{style:{marginTop:'16px',padding:'10px',background:th.surface,borderRadius:'10px',fontSize:'12px',color:th.t3,lineHeight:1.6}},"ÂêçÊ°• MindBridge v8 ¬∑ Â∑¶ÊâãÈ¨º Edition ¬∑ ",LESSONS.length," lessons ¬∑ ",STORIES.length," stories ¬∑ Built for È¨ºÈ¨º")
    )
  );
}

// ‚ïê‚ïê‚ïê MAIN APP ‚ïê‚ïê‚ïê
function MindBridge(){
  const[cL,setCL]=React.useState(0);const[cS,setCS]=React.useState(0);const[lang,setLang]=React.useState("both");const[pin,setPin]=React.useState(true);const[ai,setAi]=React.useState(null);const[mode,setMode]=React.useState("study");const[stg,setStg]=React.useState(false);const[thm,setThm]=React.useState("cosmic");const[fs,setFs]=React.useState(34);const[rate,setRate]=React.useState(0.8);const[sc,setSc]=React.useState(true);
  const lesson=LESSONS[cL],sent=lesson.ss[cS],th=THEMES[thm];
  const totalWords=LESSONS.reduce((a,l)=>a+l.ss.reduce((b,s)=>b+s.w.length,0),0);
  const speak=useSpeak(rate);
  React.useEffect(()=>{if(!window.speechSynthesis)return;window.speechSynthesis.getVoices();window.speechSynthesis.onvoiceschanged=()=>window.speechSynthesis.getVoices();},[]);
  const next=()=>{if(cS<lesson.ss.length-1)setCS(s=>s+1);else if(cL<LESSONS.length-1){setCL(l=>l+1);setCS(0);}setAi(null);};
  const prev=()=>{if(cS>0)setCS(s=>s-1);else if(cL>0){const nl=cL-1;setCL(nl);setCS(LESSONS[nl].ss.length-1);}setAi(null);};

  return React.createElement('div',{style:{minHeight:'100vh',height:'100dvh',display:'flex',flexDirection:'column',background:th.bg,color:th.t1,fontFamily:"'Outfit','Noto Sans SC',sans-serif"}},
    stg&&React.createElement(Settings,{thm,setThm,fs,setFs,sc,setSc,lang,setLang,pin,setPin,rate,setRate,close:()=>setStg(false)}),
    React.createElement('div',{style:{background:th.header,backdropFilter:'blur(16px)',borderBottom:`1px solid ${th.border}`,padding:'10px 14px',flexShrink:0}},
      React.createElement('div',{style:{maxWidth:'800px',margin:'0 auto',display:'flex',justifyContent:'space-between',alignItems:'center'}},
        React.createElement('h1',{style:{margin:0,fontSize:'20px',fontWeight:900,background:`linear-gradient(135deg,${th.accent},${th.accent2})`,WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'}},"ÂêçÊ°• MindBridge"),
        React.createElement('div',{style:{display:'flex',gap:'3px'}},
          [["study","üìñ"],["practice","üé§"],["stories","üìö"]].map(([m,e])=>React.createElement('button',{key:m,onClick:()=>setMode(m),style:{padding:'6px 10px',borderRadius:'8px',border:'none',background:mode===m?th.accent:`${th.accent}15`,color:mode===m?'#fff':th.t3,fontSize:'13px',fontWeight:700,cursor:'pointer'}},e)),
          React.createElement('button',{onClick:()=>setStg(true),style:{padding:'6px 10px',borderRadius:'8px',border:'none',background:`${th.accent}15`,color:th.t3,fontSize:'13px',cursor:'pointer'}},"‚öôÔ∏è")
        )
      )
    ),
    React.createElement('div',{style:{flex:1,overflowY:'auto',overflowX:'hidden',WebkitOverflowScrolling:'touch'}},
      React.createElement('div',{style:{maxWidth:'800px',margin:'0 auto',padding:'12px 12px 24px 12px'}},
        mode==="stories"?React.createElement(StoriesView,{th,fs,lang,spk:speak}):
        React.createElement(React.Fragment,null,
          React.createElement('div',{style:{display:'flex',gap:'5px',marginBottom:'10px',overflowX:'auto',paddingBottom:'4px'}},LESSONS.map((l,i)=>React.createElement('button',{key:l.id,onClick:()=>{setCL(i);setCS(0);setAi(null);},style:{padding:'7px 14px',borderRadius:'8px',border:`1px solid ${i===cL?th.accent:th.border}`,background:i===cL?`${th.accent}18`:'transparent',color:i===cL?th.accent:th.t3,fontSize:'13px',fontWeight:600,cursor:'pointer',whiteSpace:'nowrap',flexShrink:0}},l.tz+" "+l.title))),
          React.createElement('div',{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:'10px'}},
            React.createElement('span',{style:{fontSize:'12px',color:th.t3}},`${cS+1}/${lesson.ss.length} ¬∑ ${totalWords} words`),
            React.createElement('div',{style:{display:'flex',gap:'4px'}},lesson.ss.map((_,i)=>React.createElement('div',{key:i,onClick:()=>{setCS(i);setAi(null);},style:{width:i===cS?'18px':'7px',height:'7px',borderRadius:'4px',background:i===cS?th.accent:i<cS?`${th.accent}50`:th.border,cursor:'pointer',transition:'all 0.3s'}})))
          ),
          mode==="study"?React.createElement(SentenceView,{s:sent,lang,pin,ai,setAi,spk:speak,th,fs,showC:sc}):React.createElement(SpeechPractice,{s:sent,spk:speak,th,fs})
        )
      )
    ),
    mode!=="stories"&&React.createElement('div',{style:{flexShrink:0,background:th.header,backdropFilter:'blur(16px)',borderTop:`1px solid ${th.border}`,padding:'10px 14px',display:'flex',justifyContent:'space-between',gap:'8px'}},
      React.createElement('button',{onClick:prev,style:{padding:'10px 16px',borderRadius:'10px',border:`1px solid ${th.border}`,background:'transparent',color:th.t2,fontSize:'15px',fontWeight:600,cursor:'pointer'}},"‚Üê Prev"),
      React.createElement('button',{onClick:()=>speak(sent.w.map(w=>w.h).join("")),style:{padding:'10px 20px',borderRadius:'10px',border:'none',background:`linear-gradient(135deg,${th.accent},${th.accent2})`,color:'#fff',fontSize:'16px',fontWeight:700,cursor:'pointer'}},"üîä"),
      React.createElement('button',{onClick:next,style:{padding:'10px 16px',borderRadius:'10px',border:`1px solid ${th.accent}30`,background:`${th.accent}10`,color:th.accent,fontSize:'15px',fontWeight:700,cursor:'pointer'}},"Next ‚Üí")
    )
  );
}

const root=ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(MindBridge));
</script>
</body>
</html>
